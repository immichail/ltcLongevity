# Рекомендательный сервис. САМИ 19

## Описание содержимого директории

## Описание алгоритма работы

## Методы работы с сервисом

Для работы с сервисом рекомендуется использовать рабочее API, в котором реализованы базовые методы взаимодействия с рекомендательной системой и базой данных:

### Базовый URL
http://188.72.108.174/ltc-api

### Реализованные методы
*/status*
Проверка активности сервиса. Возвращает стандартный ответ {"res": "ok"}.

*/userV2/get?userId=**\<userId\>***
Получение информации о пользователе в системе. Возвращает запись о пользователе в базе данных

/userV2/set
Получение информации о пользователе в системе.

/group/\<groupId\>
Получение информации о группе. Возвращает запись о группе в базе данных.

/filter/values/\<filterName\>
Получение списка возможных значений фильтра. filterName = "d0LevelId"|"d1LevelId"|"d2LevelId"|"online"|"area"|"district"|"days"|"certificate"

/startPageRecommendations?userId=\<userId\>
Получение рекомендаций для пользователя для стартовой страницы по 3м блокам (Для ума, Для тела, Для души). Возвращает массив рекомендаций по группам, в каждом элементе которого приведены рекомендованные активности 3го уровня. В интерфейсе по клику производится переход к странице поиска с предуставновленными фильтрами для этого вида активности и персональными рекомендациями по группам.

/var/survey
Получение опросника в формате JSON для отображения в интерфейсе пользователя.

/group/\<groupId\>/availableDates?dateStart=\<dateStart\>&dateEnd=\<dateEnd\>
Получение списка возможных окно для записи на группу groupId с начальной датой диапазона dateStart и конечно датой диапазона dateEnd. Все даты передаются в формате DD.MM.YYYY. Возвращает список объектов вида

    {
    	"date": "03.07.2023",
    	"day": "Пн",
    	"timeEnd": "19:10:00",
    	"timeStart": "19:10:00"
    }

/user/\<userId\>/sign/\<groupId\>
Сгенерировать запись для пользователя userId на группу groupId. Возвращается объект вида 

	{
		"d0LevelName": "Для тела",
		"d1LevelId": 589,
		"d2LevelId": 591,
		"d2LevelName": "ОФП",
		"d3LevelId": 104,
		"d3LevelName": "ОФП",
		"date": "29.05.2023",
		"groupId": 801357270,
		"online": false,
		"status": "planned",
		"timeEnded": "19:10",
		"timeStarted": "19:10",
		"userId": 101391104,
		"workId": 402103135
	}

/user/\<userId\>/attends
Получить записи на занятия для пользователя.

/search
Универсальный рут для поиска и рекомендаций. В случае, если задан userId и не задан q, то используется движок рекомендательной системы. Если задан q, то в любом случае используется текстовый поиск. Если не задан userId и не задан q, то используется простой поиск по фильтрам. В случае, если один из параметров не указан, то он просто игнорируется при поиске

Принимает список параметров для фильтраций:

    q: string - строка запроса для текстового поиска
    d0LevelId, d1LevelId, d2LevelId, d3LevelId: string - список id активностей соответствующего уровня для фильтрации групп, принимается список id разделенных запятой (к примеру d1LevelId=1105,1104)
    online: "0"|"1" - значение 0 соответствует значению "Да", 1 - "Нет"
    certificate: "0"|"1" - аналогично полю онлайн
    days: string - через запятую коды дней недели
    area: string - через запятую коды районов
    district: string - через запятую коды округов
    userId: int - код пользователя для персонализованного поиска
    active: string - указание на поиск среди только активных групп, 0 - только неактивные группы, 1 - только активные группы.

Примеры запросов:
/search?days=0;1&q=англ&online=0 - запрос на поиск курсов с окнами в Понедельник и Вторник, которые проходят онлайн
/search?d3LevelId=1157 - поиск групп для активности "ОНЛАЙН Здорово жить"
# Рекомендательный сервис. САМИ 19

## Описание содержимого директории

## Описание алгоритма работы

## Методы работы с сервисом

Для работы с сервисом рекомендуется использовать рабочее API, в котором реализованы базовые методы взаимодействия с рекомендательной системой и базой данных:

### Базовый URL
https://212.248.65.138:11055/ltc

### Реализованные методы
*/status*
Проверка активности сервиса. Возвращает стандартный ответ {"res": "ok"}.

*/userV2/get?userId=**\<userId\>***
Получение информации о пользователе в системе. Возвращает запись о пользователе в базе данных

/userV2/set
Получение информации о пользователе в системе.

/group/\<groupId\>
Получение информации о группе. Возвращает запись о группе в базе данных.

/filter/values/\<filterName\>
Получение списка возможных значений фильтра. filterName = "d0LevelId"|"d1LevelId"|"d2LevelId"|"online"|"area"|"district"|"days"|"certificate"

/startPageRecommendations?userId=\<userId\>
Получение рекомендаций для пользователя для стартовой страницы по 3м блокам (Для ума, Для тела, Для души). Возвращает массив рекомендаций по группам, в каждом элементе которого приведены рекомендованные активности 3го уровня. В интерфейсе по клику производится переход к странице поиска с предуставновленными фильтрами для этого вида активности и персональными рекомендациями по группам.

/var/survey
Получение опросника в формате JSON для отображения в интерфейсе пользователя.

/group/\<groupId\>/availableDates?dateStart=\<dateStart\>&dateEnd=\<dateEnd\>
Получение списка возможных окно для записи на группу groupId с начальной датой диапазона dateStart и конечно датой диапазона dateEnd. Все даты передаются в формате DD.MM.YYYY. Возвращает список объектов вида

    {
    	"date": "03.07.2023",
    	"day": "Пн",
    	"timeEnd": "19:10:00",
    	"timeStart": "19:10:00"
    }

/user/\<userId\>/sign/\<groupId\>
Сгенерировать запись для пользователя userId на группу groupId. Возвращается объект вида 

	{
		"d0LevelName": "Для тела",
		"d1LevelId": 589,
		"d2LevelId": 591,
		"d2LevelName": "ОФП",
		"d3LevelId": 104,
		"d3LevelName": "ОФП",
		"date": "29.05.2023",
		"groupId": 801357270,
		"online": false,
		"status": "planned",
		"timeEnded": "19:10",
		"timeStarted": "19:10",
		"userId": 101391104,
		"workId": 402103135
	}

/user/\<userId\>/attends
Получить записи на занятия для пользователя.

/search
Универсальный рут для поиска и рекомендаций. В случае, если задан userId и не задан q, то используется движок рекомендательной системы. Если задан q, то в любом случае используется текстовый поиск. Если не задан userId и не задан q, то используется простой поиск по фильтрам. В случае, если один из параметров не указан, то он просто игнорируется при поиске

Принимает список параметров для фильтраций:

    q: string - строка запроса для текстового поиска
    d0LevelId, d1LevelId, d2LevelId, d3LevelId: string - список id активностей соответствующего уровня для фильтрации групп, принимается список id разделенных запятой (к примеру d1LevelId=1105,1104)
    online: "0"|"1" - значение 0 соответствует значению "Да", 1 - "Нет"
    certificate: "0"|"1" - аналогично полю онлайн
    days: string - через запятую коды дней недели
    area: string - через запятую коды районов
    district: string - через запятую коды округов
    userId: int - код пользователя для персонализованного поиска
    active: string - указание на поиск среди только активных групп, 0 - только неактивные группы, 1 - только активные группы.

Примеры запросов:
/search?days=0;1&q=англ&online=0 - запрос на поиск курсов с окнами в Понедельник и Вторник, которые проходят онлайн
/search?d3LevelId=1157 - поиск групп для активности "ОНЛАЙН Здорово жить"

# Рекомендательный сервис. САМИ 19

## Описание содержимого директории

## Описание алгоритма работы

## Методы работы с сервисом

Для работы с сервисом рекомендуется использовать рабочее API, в котором реализованы базовые методы взаимодействия с рекомендательной системой и базой данных:

### Базовый URL
https://212.248.65.138:11055/ltc

### Реализованные методы
*/status*
Проверка активности сервиса. Возвращает стандартный ответ {"res": "ok"}.

*/userV2/get?userId=**\<userId\>***
Получение информации о пользователе в системе. Возвращает запись о пользователе в базе данных

/userV2/set
Получение информации о пользователе в системе.

/group/\<groupId\>
Получение информации о группе. Возвращает запись о группе в базе данных.

/filter/values/\<filterName\>
Получение списка возможных значений фильтра. filterName = "d0LevelId"|"d1LevelId"|"d2LevelId"|"online"|"area"|"district"|"days"|"certificate"

/startPageRecommendations?userId=\<userId\>
Получение рекомендаций для пользователя для стартовой страницы по 3м блокам (Для ума, Для тела, Для души). Возвращает массив рекомендаций по группам, в каждом элементе которого приведены рекомендованные активности 3го уровня. В интерфейсе по клику производится переход к странице поиска с предуставновленными фильтрами для этого вида активности и персональными рекомендациями по группам.

/var/survey
Получение опросника в формате JSON для отображения в интерфейсе пользователя.

/group/\<groupId\>/availableDates?dateStart=\<dateStart\>&dateEnd=\<dateEnd\>
Получение списка возможных окно для записи на группу groupId с начальной датой диапазона dateStart и конечно датой диапазона dateEnd. Все даты передаются в формате DD.MM.YYYY. Возвращает список объектов вида

    {
    	"date": "03.07.2023",
    	"day": "Пн",
    	"timeEnd": "19:10:00",
    	"timeStart": "19:10:00"
    }

/user/\<userId\>/sign/\<groupId\>
Сгенерировать запись для пользователя userId на группу groupId. Возвращается объект вида 

	{
		"d0LevelName": "Для тела",
		"d1LevelId": 589,
		"d2LevelId": 591,
		"d2LevelName": "ОФП",
		"d3LevelId": 104,
		"d3LevelName": "ОФП",
		"date": "29.05.2023",
		"groupId": 801357270,
		"online": false,
		"status": "planned",
		"timeEnded": "19:10",
		"timeStarted": "19:10",
		"userId": 101391104,
		"workId": 402103135
	}

/user/\<userId\>/attends
Получить записи на занятия для пользователя.

/search
Универсальный рут для поиска и рекомендаций. В случае, если задан userId и не задан q, то используется движок рекомендательной системы. Если задан q, то в любом случае используется текстовый поиск. Если не задан userId и не задан q, то используется простой поиск по фильтрам. В случае, если один из параметров не указан, то он просто игнорируется при поиске

Принимает список параметров для фильтраций:

    q: string - строка запроса для текстового поиска
    d0LevelId, d1LevelId, d2LevelId, d3LevelId: string - список id активностей соответствующего уровня для фильтрации групп, принимается список id разделенных запятой (к примеру d1LevelId=1105,1104)
    online: "0"|"1" - значение 0 соответствует значению "Да", 1 - "Нет"
    certificate: "0"|"1" - аналогично полю онлайн
    days: string - через запятую коды дней недели
    area: string - через запятую коды районов
    district: string - через запятую коды округов
    userId: int - код пользователя для персонализованного поиска
    active: string - указание на поиск среди только активных групп, 0 - только неактивные группы, 1 - только активные группы.

Примеры запросов:
/search?days=0;1&q=англ&online=0 - запрос на поиск курсов с окнами в Понедельник и Вторник, которые проходят онлайн
/search?d3LevelId=1157 - поиск групп для активности "ОНЛАЙН Здорово жить"
/search?userId=101346612&active=1 - получить персональные рекомендации для пользователя с id 101346612 среди только активных групп.



